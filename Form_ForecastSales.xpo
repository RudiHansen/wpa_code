Exportfile for AOT version 1.0 or later
Formatversion: 1

***Element: FRM

; Microsoft Dynamics AX Forms unloaded
; --------------------------------------------------------------------------------
FRMVERSION 12

FORM #ForecastSales
  PROPERTIES
    Name                #ForecastSales
    Origin              #{B7EBA282-87D0-4189-98AA-95C0084593AD}
  ENDPROPERTIES
  
  METHODS
    SOURCE #classDeclaration
      #final class FormRun extends ObjectRun
      #{
      #    NoYes                lockmodel;
      #    BudgetModelHeadId    modelId;
      #
      #    NoYes                lockItem;
      #    ItemId               itemId;
      #
      #    NoYes                lockItemGroup;
      #    ItemGroupId          itemGroupId;
      #
      #    NoYes                lockCustAccount;
      #    CustAccount          custAccountId;
      #
      #    NoYes                lockCustGroup;
      #    CustGroupId          custGroupId;
      #
      #    QueryBuildRange      criteriaReport;
      #    QueryBuildRange      criteriaExpand_1;
      #    QueryBuildRange      criteriaExpand_2;
      #
      #    QueryBuildRange      criteriaModelId;
      #
      #    QueryBuildRange      criteriaCostGroupId;
      #    QueryBuildRange      criteriaControlId;
      #
      #    QueryBuildRange      criteriaCustAccountId;
      #    QueryBuildRange      criteriaCustGroupId;
      #    QueryBuildRange      criteriaItemId;
      #    QueryBuildRange      criteriaItemGroupId;
      #
      #    QueryBuildRange      criteriaBudgetedField;
      #
      #    QueryBuildDataSource qB;
      #    QueryBuildDataSource qb2;
      #    QueryBuildDataSource qb3;
      #    boolean              calledFromProject;
      #    ProjId               projId;
      #
      #    boolean              showChild;
      #
      #    QueryBuildRange      criteriaProjId;
      #    QueryBuildRange      criteriaWIPProjId;
      #
      #    QueryBuildRange      criteriaProjInvoiceProjId;
      #    QueryBuildRange      criteriaFixedPrice;
      #    QueryBuildRange      criteriaTimeMaterial;
      #    QueryBuildRange      criteriaInternal;
      #    QueryBuildRange      criteriaCost;
      #    QueryBuildRange      criteriaInvestment;
      #    QueryBuildRange      criteriaTime;
      #    QueryBuildRange      criteriaSorting1;
      #    QueryBuildRange      criteriaSorting2;
      #    QueryBuildRange      criteriaSorting3;
      #    QueryBuildRange      criteriaGroupId;
      #    QueryBuildRange      criteriaCustAccount;
      #
      #    QueryBuildRange      criteriaCategoryGroupId;
      #
      #    QueryBuildRange      criteriaTransDate;
      #    QueryBuildRange      criteriaCategoryId;
      #
      #    QueryBuildRange      criteriaActivityId;
      #
      #    ProjStatistic        projStatistic;
      #    TransDate            ledgerFromDate;
      #    TransDate            ledgerToDate;
      #
      #    InventDimCtrl_Frm_Forecast    inventDimFormSetup;
      #
      #    SysFormSplitter_Y    formSplitter;
      #    CurrencyCode         oldCurrency;
      #    ProjCashFlow         projCashFlow;
      #    ProjCostControl      projCostControl;
      #
      #    ProjForecastEmpl     projForecastEmpl;//WPA
      #    //<PMF>
      #    PdsCWFormCtrl           cwFormCtrl;
      #    //</PMF>
      #
      #
      #    #define.CurrentVersion(1)
      #    #localmacro.CurrentList
      #        lockModel,
      #        modelId,
      #        lockItem,
      #        itemId,
      #        lockItemGroup,
      #        itemGroupId,
      #        lockCustAccount,
      #        custAccountId,
      #        lockCustGroup,
      #        custGroupId
      #    #endmacro
      #    DimensionDefaultingController dimensionDefaultingController;
      #}
      #
    ENDSOURCE
    SOURCE #buttonCoverage
      #public void buttonCoverage()
      #{
      #    ctrlLedgerCoverage.enabled(forecastSales.mustBeCovPlanned() || forecastSalesExpand.mustBeCovPlanned());
      #}
      #
    ENDSOURCE
    SOURCE #categoryTable
      #public boolean categoryTable(ProjStatistic _projStatistic = projStatistic)
      #{
      #    return (_projStatistic && _projStatistic.parmCategoryGroupId());
      #}
      #
    ENDSOURCE
    SOURCE #categoryTableCashFlow
      #public boolean categoryTableCashFlow(ProjCashFlow _projCashFlow = projCashFlow)
      #{
      #    return (_projCashFlow && _projCashFlow.parmCategoryGroupId());
      #}
      #
      #
    ENDSOURCE
    SOURCE #categoryTableCostControl
      #public boolean categoryTableCostControl(ProjCostControl _projCostControl = projCostControl)
      #{
      #    return (_projCostControl && _projCostControl.parmCategoryGroupId());
      #}
      #
      #
    ENDSOURCE
    SOURCE #close
      #public void close()
      #{
      #    FormRun caller;
      #    FormDataSource fds;
      #
      #    if ( refreshCallerOnClose )
      #    {
      #        caller = element.args().caller();
      #
      #        if ( caller )
      #        {
      #            fds = caller.dataSource(1);
      #
      #            if ( fds )
      #            {
      #                fds.research(true);
      #            }
      #        }
      #    }
      #    xSysLastValue::saveLast(this);
      #    super();
      #}
    ENDSOURCE
    SOURCE #doReFreshDatasource
      #public void doReFreshDatasource()
      #{
      #    forecastSales_ds.executeQuery();
      #}
    ENDSOURCE
    SOURCE #init
      #void init()
      #{
      #    this.initFromProject();
      #
      #    //<PMF>
      #    if (#PdsCatchWeightEnabled)
      #    {
      #        cwFormCtrl = PdsCWFormCtrl::constructFromForm(element);
      #        cwFormCtrl.parmFieldIds(PdsCWValidation::fieldMapFromContainers(
      #        [[fieldNum(ForecastSales, InventQty), fieldNum(ForecastSales, PdsCWQty),true]] ));
      #        cwFormCtrl.parmItemFieldId(fieldNum(ForecastSales, ItemId));
      #        cwFormCtrl.parmUnitFieldId(fieldNum(ForecastSales, PdsCWUnitId));
      #    }
      #    //</PMF>
      #
      #    super();
      #
      #    if (!this.validateCaller())
      #    {
      #        throw(error(Error::missingFormActiveBuffer(element.design().caption())));
      #    }
      #
      #    formSplitter = new SysFormSplitter_Y(ctrlSplit,overview_GridForecastSales,element);
      #
      #    if (calledFromProject)
      #    {
      #        element.design().caption("@SYS342500");
      #    }
      #
      #    element.updateDesign(InventDimFormDesignUpdate::Init);
      #
      #    xSysLastValue::getLast(this);
      #
      #    element.updateFields();
      #
      #    dimensionDefaultingController = DimensionDefaultingController::constructInTabWithValues(false, true, true, 0, this, tabFinancialDimensions, "@SYS101181");
      #    dimensionDefaultingController.parmAttributeValueSetDataSource(forecastSales_ds, fieldStr(ForecastSales, DefaultDimension));
      #}
    ENDSOURCE
    SOURCE #initFromProject
      #public void initFromProject()
      #{
      #    ProjTable                   localProjTable;
      #    ProjControlPeriodCostGroup  localProjControlPeriodCostGroup;
      #    ProjSelected                projSelected;
      #    DictConfigurationKey        dictConfigKey = new DictConfigurationKey(configurationKeyNum(ProjBasicForecast));
      #
      #    if (element.args().parmEnumType() == enumNum(ProjSelected))
      #    {
      #        projSelected = element.args().parmEnum();
      #    }
      #
      #    if (element.args().dataset()    == tableNum(ProjTable)  ||
      #        element.args().dataset()    == tableNum(ProjControlPeriodCostGroup) ||
      #        element.args().dataset()    == tableNum(TmpProjStatistic) ||
      #        element.args().dataset()    == tableNum(ProjInvoiceTable) ||
      #        element.args().dataset()    == tableNum(ProjWIPTable) ||
      #        element.args().dataset()    == tableNum(TmpProjCashFlow) ||
      #        projSelected                == ProjSelected::Project
      #       )
      #    {
      #        calledFromProject = true;
      #
      #        if (!dictConfigKey.enabled())
      #        {
      #            throw error (strFmt("@SYS75398", dictConfigKey.name()));
      #        }
      #
      #
      #
      #
      #        if (element.args().dataset()    == tableNum(ProjTable))
      #        {
      #            localProjTable = element.args().record();
      #            projId = localProjTable.ProjId;
      #        }
      #
      #        if(element.args().dataset() == tableNum(ProjControlPeriodCostGroup))
      #        {
      #            localProjControlPeriodCostGroup = element.args().record();
      #            projId = localProjControlPeriodCostGroup.ProjId;
      #        }
      #    }
      #}
      #
    ENDSOURCE
    SOURCE #initParmDefault
      #/*
      #This method is called when no SysLastValue record can be found in xSysLastValue.GetLast()
      #*/
      #public void initParmDefault()
      #{
      #}
    ENDSOURCE
    SOURCE #inventDim
      #/// <summary>
      #///    Finds or creates an <c>InventDim</c> record with the current data of the <c>InventDim</c> datasource.
      #/// </summary>
      #/// <returns>
      #///    An <c>InventDim</c> record.
      #/// </returns>
      #public InventDim inventDim()
      #{
      #    InventDim   inventDimLocal;
      #
      #    if (!inventDim.RecId)
      #    {
      #        inventDimLocal = InventDim::findOrCreate(inventDim);
      #    }
      #    else
      #    {
      #        inventDimLocal = inventDim;
      #    }
      #
      #    return inventDimLocal;
      #}
    ENDSOURCE
    SOURCE #inventDimSetupObject
      #public Object inventDimSetupObject()
      #{
      #    return inventDimFormSetup;
      #}
    ENDSOURCE
    SOURCE #lastValueDataAreaId
      #public DataAreaId lastValueDataAreaId()
      #{
      #    return curext();
      #}
    ENDSOURCE
    SOURCE #lastValueDesignName
      #public IdentifierName lastValueDesignName()
      #{
      #    if (element.args() && element.args().caller())
      #    {
      #        return element.args().caller().name();
      #    }
      #    return '';
      #}
    ENDSOURCE
    SOURCE #lastValueElementName
      #public IdentifierName lastValueElementName()
      #{
      #    return this.name();
      #}
    ENDSOURCE
    SOURCE #lastValueType
      #public UtilElementType lastValueType()
      #{
      #    return UtilElementType::Form;
      #}
    ENDSOURCE
    SOURCE #lastValueUserId
      #public UserId lastValueUserId()
      #{
      #    return curUserId();
      #}
    ENDSOURCE
    SOURCE #linkProjStatistic
      #void linkProjStatistic()
      #{
      #    #define.star('*')
      #
      #    if (projStatistic.parmItem())
      #    {
      #        ledgerFromDate  = projStatistic.parmLedgerFromDate();
      #        ledgerToDate    = projStatistic.parmLedgerToDate();
      #
      #        if (projStatistic.parmProjFromDate() || projStatistic.parmProjToDate())
      #        {
      #            criteriaTransDate.value(strFmt('%1..%2',queryValue(projStatistic.parmProjFromDate()),queryValue(projStatistic.parmProjToDate())));
      #        }
      #
      #        modelId = projStatistic.parmForecastModelId();
      #        projId  = projStatistic.parmProjId();
      #
      #        if (projStatistic.parmProjCategoryId())
      #        {
      #            criteriaCategoryId.value(projStatistic.parmProjCategoryId());
      #        }
      #
      #        if (element.categoryTable(element.args().parmObject()))
      #        {
      #            criteriaCategoryGroupId.value(projStatistic.parmCategoryGroupId());
      #        }
      #
      #        if (projStatistic.parmFixedPrice())
      #        {
      #            criteriaFixedPrice.value(queryValue(ProjType::FixedPrice));
      #        }
      #        if (projStatistic.parmTimeMaterial())
      #        {
      #            criteriaTimeMaterial.value(queryValue(ProjType::TimeMaterial));
      #        }
      #        if (projStatistic.parmInternalCost())
      #        {
      #            criteriaInternal.value(queryValue(ProjType::Cost));
      #        }
      #        if (projStatistic.parmInternalCost())
      #        {
      #            criteriaCost.value(queryValue(ProjType::Internal));
      #        }
      #        if (projStatistic.parmInvestment())
      #        {
      #            criteriaInvestment.value(queryValue(ProjType::Investment));
      #        }
      #        if (projStatistic.parmTime())
      #        {
      #            criteriaTime.value(queryValue(ProjType::Time));
      #        }
      #
      #        if (projStatistic.parmSorting1())
      #        {
      #            criteriaSorting1.value(queryValue(projStatistic.parmSorting1()));
      #        }
      #        if (projStatistic.parmSorting2())
      #        {
      #            criteriaSorting2.value(queryValue(projStatistic.parmSorting2()));
      #        }
      #        if (projStatistic.parmSorting3())
      #        {
      #            criteriaSorting3.value(queryValue(projStatistic.parmSorting3()));
      #        }
      #        if (projStatistic.parmCustAccount())
      #        {
      #            criteriaCustAccount.value(queryValue(projStatistic.parmCustAccount()));
      #        }
      #        if (projStatistic.parmProjGroupId())
      #        {
      #            criteriaGroupId.value(queryValue(projStatistic.parmProjGroupId()));
      #        }
      #
      #        if (projStatistic.parmProjTree())
      #        {
      #            criteriaProjId.value(projStatistic.parmProjId()+ #star);
      #        }
      #        else
      #            if (projStatistic.parmProjId())
      #            {
      #                criteriaProjId.value(queryValue(projStatistic.parmProjId()));
      #            }
      #
      #        if (projStatistic.parmProjWIPId())
      #        {
      #            criteriaWIPProjId.value(queryValue(projStatistic.parmProjWIPId()));
      #        }
      #
      #        if (projStatistic.parmProjInvoiceProjId())
      #        {
      #            criteriaProjInvoiceProjId.value(queryValue(projStatistic.parmProjInvoiceProjId()));
      #        }
      #    }
      #    else
      #    {
      #        criteriaProjId.value(queryValue(SysQuery::valueEmptyString()));
      #    }
      #}
    ENDSOURCE
    SOURCE #pack
      #public container pack()
      #{
      #    lockmodel       = lockModelId.value();
      #    modelId         = critModelId.text();
      #
      #    lockItem        = lockItemId.value();
      #    itemId          = critItemId.text();
      #
      #    lockItemGroup   = lockItemGroupId.value();
      #    itemGroupId     = critItemGroupId.text();
      #
      #    lockCustAccount = lockCustAccountId.value();
      #    custAccountId   = critCustAccountId.text();
      #
      #    lockCustGroup   = lockCustGroupId.value();
      #    custGroupId     = critCustGroupId.text();
      #
      #    return [#CurrentVersion,#CurrentList];
      #
      #}
    ENDSOURCE
    SOURCE #setModifiedPriceAgreement
      #public void setModifiedPriceAgreement(FieldId _fieldId)
      #{
      #    if (forecastSales.modifiedProductDim(this.inventDim(),
      #                                      _fieldId,
      #                                      InventDimGroupSetup::newItemId(forecastSales.ItemId)))
      #    {
      #        forecastSales_ds.updateAmount();
      #    }
      #}
    ENDSOURCE
    SOURCE #setRefreshOnClose
      #/// <summary>
      #/// Sets refreshOnClose flag to true only if the caller's name
      #/// is: ProjForecastListPage
      #/// </summary>
      #private void setRefreshOnClose()
      #{
      #    FormRun         caller;
      #
      #    refreshCallerOnClose = false;
      #
      #    if (element.args() && element.args().caller())
      #    {
      #        caller = element.args().caller();
      #        refreshCallerOnClose = strCmp(caller.name(), formStr(ProjForecastListPage)) == 0;
      #    }
      #}
    ENDSOURCE
    SOURCE #unpack
      #public boolean unpack(container _packedClass)
      #{
      #
      #    int version     = RunBase::getVersion(_packedClass);
      #
      #    switch (version)
      #    {
      #        case #CurrentVersion:
      #            [version,#CurrentList] = _packedClass;
      #
      #            lockModelId.value(lockmodel);
      #            lockItemId.value(lockItem);
      #            lockItemGroupId.value(lockItemGroup);
      #            lockCustAccountId.value(lockCustAccount);
      #            lockCustGroupId.value(lockCustGroup);
      #
      #            critModelId.text(modelId);
      #            critItemId.text(itemId);
      #            critItemGroupId.text(itemGroupId);
      #            critCustAccountId.text(custAccountId);
      #            critCustGroupId.text(custGroupId);
      #
      #            return true;
      #
      #        default :
      #            return false;
      #    }
      #
      #    return false;
      #
      #}
    ENDSOURCE
    SOURCE #updateCaption
      #public void updateCaption()
      #{
      #    str             captionText;
      #
      #    captionText= calledFromProject ? "@SYS342500" : strFmt(tableId2pname(tableNum(ForecastSales)));
      #
      #    if (lockModelId.value())
      #    {
      #       captionText +=', ' +  fieldPName(ForecastSales,ModelId) + ': ' + critModelId.text();
      #    }
      #
      #    if (lockCustGroupId.value() && lockCustGroupId.allowEdit())     // allowEdit == false => caption is set via dynalink
      #    {
      #        captionText +=', ' + fieldPName(ForecastSales,CustGroupId) + ': ' + critCustGroupId.text();
      #    }
      #
      #    if (lockCustAccountId.value() && lockCustAccountId.allowEdit()) // allowEdit == false => caption is set via dynalink
      #    {
      #        captionText +=', ' + fieldPName(ForecastSales,CustAccountId) + ': ' + critCustAccountId.text();
      #    }
      #
      #    if (lockItemGroupId.value() && lockItemGroupId.allowEdit())     // allowEdit == false => caption is set via dynalink
      #    {
      #        captionText +=', ' + fieldPName(ForecastSales,ItemGroupId) + ': ' + critItemGroupId.text();
      #    }
      #
      #    if (lockItemId.value() && lockItemId.allowEdit())               // allowEdit == false => caption is set via dynalink
      #    {
      #        captionText +=', ' + fieldPName(ForecastSales,ItemId) + ': ' + critItemId.text();
      #    }
      #
      #    element.design().caption(captionText);
      #
      #}
    ENDSOURCE
    SOURCE #updateCostPrice
      #public void updateCostPrice()
      #{
      #    InventDim   inventDimLocal = this.inventDim();
      #    if (forecastSales.ItemId)
      #    {
      #        if (foreCastSales.ItemAllocateId)
      #        {
      #            forecastSales.CostPrice = InventTable::find(forecastSales.ItemId).costPcsPrice('',null,null,forecastSales.StartDate);
      #        }
      #        else
      #        {
      #            forecastSales.CostPrice = InventTable::find(forecastSales.ItemId).costPcsPrice(inventDimLocal.InventDimId,
      #                                                                                           inventDimLocal,
      #                                                                                           null,
      #                                                                                           forecastSales.StartDate);
      #        }
      #    }
      #    else
      #    {
      #        forecastSales.CostPrice = 0;
      #    }
      #}
      #
    ENDSOURCE
    SOURCE #updateDesign
      #public void updateDesign(InventDimFormDesignUpdate _mode)
      #{
      #    InventDimParm   inventDimParmShow;
      #    NoYes           useItemAllocationKey;
      #
      #    switch (_mode)
      #    {
      #        case InventDimFormDesignUpdate::Init:
      #            if (!inventDimFormSetup)
      #            {
      #                inventDimFormSetup  = InventDimCtrl_Frm_Forecast::newFromForm(element);
      #            }
      #            inventDimFormSetup.parmSkipOnHandLookUp(true);
      #            inventDimFormSetup.parmDimParmVisibleGrid(inventDimParmShow);
      #            //fall through
      #        case InventDimFormDesignUpdate::Active,
      #            InventDimFormDesignUpdate::FieldChange:
      #            useItemAllocationKey = forecastSales.ItemAllocateId ? NoYes::Yes : NoYes::No;
      #            inventDimFormSetup.parmUseItemAllocationKey(useItemAllocationKey);
      #            inventDimFormSetup.formActiveSetup(InventDimGroupSetup::newItemId(forecastSales.ItemId));
      #            inventDimFormSetup.formSetControls(true);
      #            break;
      #        default:
      #            throw error(strFmt("@SYS54195",funcName()));
      #    }
      #}
    ENDSOURCE
    SOURCE #updateFields
      #public void updateFields()
      #{
      #    element.lock();
      #
      #    overview_modelId.visible(! lockModelId.value());
      #    overview_ProjId.visible(calledFromProject);
      #
      #    overview_CustGroupId.visible(! (calledFromProject || lockCustGroupId.value() || (lockCustAccountId.value() && critCustAccountId.text())));
      #    overview_CustAccountId.visible(! (calledFromProject || lockCustAccountId.value()));
      #
      #    overview_ItemGroupId.visible(! (calledFromProject || lockItemGroupId.value() || (lockItemId.value() && critItemId.text())));
      #    overview_ItemId.visible(! lockItemId.value());
      #
      #    overview_amount.visible( ! calledFromProject);
      #    overview_CostPrice.visible(calledFromProject);
      #
      #    forecastSales_ProjForecastBudgetType.visible(calledFromProject);
      #    element.resetSize();
      #
      #    element.unLock();
      #
      #    element.updateCaption();
      #
      #}
    ENDSOURCE
    SOURCE #validateCaller
      #public boolean validateCaller()
      #{
      #    InventTable inventTable;
      #
      #    switch(element.args().dataset())
      #    {
      #        case tableNum(InventTable):
      #            inventTable = element.args().record();
      #            if (!inventTable.RecId)
      #            {
      #                return checkFailed(strFmt("@SYS84897", tablePName(InventTable)));
      #            }
      #            if (!InventTable::exist(inventTable.ItemId))
      #            {
      #                return checkFailed(strFmt("@SYS5307", inventTable.ItemId));
      #            }
      #            break;
      #    }
      #    return true;
      #}
    ENDSOURCE
    SOURCE #validateProject
      #public boolean validateProject()
      #{
      #    boolean  ret    = true;
      #
      #    if (! forecastSales.ProjId)
      #    {
      #        ret  = checkFailed("@SYS81107");
      #    }
      #
      #    return ret;
      #}
    ENDSOURCE
  ENDMETHODS
  OBJECTBANK
    PROPERTIES
    ENDPROPERTIES
    
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ForecastSales
          Table               #ForecastSales
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD ItemId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    InventTable     inventTable = InventTable::find(forecastsales.ItemId);
                #
                #    super();
                #
                #    inventdim.initFromInventTable(inventTable,InventItemOrderSetupType::Sales);
                #
                #    if (!forecastSales.isProjLumpSum())
                #    {
                #        element.updateCostPrice();
                #    }
                #
                #    element.updateDesign(InventDimFormDesignUpdate::FieldChange);
                #
                #    // disable all unenabled fields
                #    inventDim.clearNotSelectedDim(inventDimFormSetup.parmDimParmEnabled());
                #
                #    forecastSales.SalesPurchLine::setPriceAgreement(inventDim,true);
                #    forecastSales_ds.updateAmount();
                #    forecastSales_ds.updateForecastSalesFields();
                #
                #    if (forecastSales.ProjId)
                #    {
                #        forecastSales.ProjLinePropertyId = ProjLinePropertySetup::findLinePropertyId(forecastSales.ProjId,forecastSales.ProjCategoryId);
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD StartDate
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    forecastSales.SalesPurchLine::setPriceAgreement(element.inventDim(),true);
                #    forecastSales_ds.updateAmount();
                #    forecastSales_ds.updateForecastSalesFields();
                #    element.updateCostPrice();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SalesPrice
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    forecastSales_ds.updateAmount();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DiscPercent
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    forecastSales_ds.updateAmount();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CustAccountId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    forecastSales.SalesPurchLine::setPriceAgreement(element.inventDim(),true);
                #    forecastSales_ds.updateAmount();
                #    forecastSales_ds.updateForecastSalesFields();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Currency
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    oldCurrency = forecastSales.Currency;
                #    forecastSales.SalesPurchLine::setPriceAgreement(element.inventDim(),true);
                #    forecastSales_ds.updateAmount();
                #    forecastSales_ds.updateForecastSalesFields();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SalesQty
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    forecastSales.SalesPurchLine::setPriceAgreement(element.inventDim(),true);
                #    forecastSales_ds.updateAmount();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SalesUnitId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    forecastSales.SalesPurchLine::setPriceAgreement(element.inventDim(),true);
                #    forecastSales_ds.updateAmount();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SalesMarkup
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    forecastSales_ds.updateAmount();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DiscAmount
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    forecastSales_ds.updateAmount();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PriceUnit
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    forecastSales_ds.updateAmount();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ItemAllocateId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    ProjParameters projParameters=ProjParameters::find(false);
                #
                #    super();
                #
                #    element.updateCostPrice();
                #
                #    if(forecastSales.isProjLumpSum())
                #    {
                #        forecastSales.CostPrice=(forecastSales.costAmount());
                #        forecastSales.SalesQty = 1.00;
                #        forecastSales.InventQty= 1.00;
                #        forecastSales.ItemId   = '';
                #        forecastSales_ds.object(fieldNum(ForecastSales,ItemId)).allowEdit(false);
                #        forecastSales_ds.object(fieldNum(ForecastSales,SalesQty)).allowEdit(false);
                #    }
                #    else
                #    {
                #        forecastSales_ds.object(fieldNum(ForecastSales,ItemId)).allowEdit(true);
                #        forecastSales_ds.object(fieldNum(ForecastSales,SalesQty)).allowEdit(true);
                #    }
                #
                #    element.updateDesign(InventDimFormDesignUpdate::FieldChange);
                #
                #    // disable all unenabled fields
                #    inventDim.clearNotSelectedDim(inventDimFormSetup.parmDimParmEnabled());
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD AllocateMethod
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    forecastSales_ds.active();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ItemBOMId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(
                #    FormControl _formControl,
                #    str         _filterStr)
                #{
                #    InventTable::lookupBOMId(_formControl, forecastSales.ItemId, inventDim);
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ItemRouteId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(
                #    FormControl _formControl,
                #    str         _filterStr)
                #{
                #    InventTable::lookupRouteId(_formControl, forecastSales.ItemId, inventDim);
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ProjId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (lockModelId.value() && forecastSales.ModelId != critModelId.text())  // if initFromProjTable finds a modelId and the modelId is locked
                #    {
                #        forecastSales.ModelId = critModelId.text();
                #    }
                #
                #    forecastSales_ds.updateAmount();
                #
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ActivityNumber
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(
                #    FormControl _formControl,
                #    str         _filterStr)
                #{
                #    HierarchyTreeTable::lookupHierarchyTree(_formControl, ProjTable::find(forecastSales.ProjId));
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD ProjFundingSource
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #resolveReference
                #public Common resolveReference(FormReferenceControl _formReferenceControl)
                #{
                #    return ProjFundingSource::resolveReferenceByContractFSName(_formReferenceControl, ProjTable::find(forecastSales.ProjId).ProjInvoiceProjId);
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    return ProjFundingSource::lookupFundingSourceByContract(_formReferenceControl, ProjTable::find(forecastSales.ProjId).ProjInvoiceProjId);
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #changeCurrency
          #public void changeCurrency(
          #    CurrencyCode _oldCurrency,
          #    CurrencyCode _newCurrency)
          #{
          #    forecastSales.CostPrice = Currency::curPrice2CurPrice(forecastSales.CostPrice,_oldCurrency,
          #                                                          _newCurrency,forecastSales.StartDate);
          #}
          #
        ENDSOURCE
        SOURCE #initFromProject
          #public void initFromProject()
          #{
          #    qB.clearDynalinks();
          #    criteriaProjId      = qB.addRange(fieldNum(ForecastSales, ProjId));
          #    criteriaCategoryId  = qB.addRange(fieldNum(ForecastSales, ProjCategoryId));
          #    criteriaTransDate   = qB.addRange(fieldNum(ForecastSales, StartDate));
          #
          #    if (element.args().dataset() == tableNum(TmpProjStatistic) && (element.categoryTable(element.args().parmObject())))
          #    {
          #        qb2                = qB.addDataSource(tableNum(ProjCategory));
          #        qb2.addLink(fieldNum(ForecastSales, ProjCategoryId), fieldNum(ProjCategory, CategoryId));
          #        qb2.fetchMode(0);
          #        qb2.joinMode(JoinMode::ExistsJoin);
          #
          #        criteriaCategoryGroupId        = qb2.addRange(fieldNum(ProjCategory, CategoryGroupId));
          #    }
          #    else if (element.args().dataset() == tableNum(TmpProjCashFlow) && (element.categoryTableCashFlow(element.args().parmObject())))
          #    {
          #        qb2                = qB.addDataSource(tableNum(ProjCategory));
          #        qb2.addLink(fieldNum(ForecastSales, ProjCategoryId), fieldNum(ProjCategory, CategoryId));
          #        qb2.fetchMode(0);
          #        qb2.joinMode(JoinMode::ExistsJoin);
          #
          #        criteriaCategoryGroupId        = qb2.addRange(fieldNum(ProjCategory, CategoryGroupId));
          #    }
          #    else if (element.args().dataset() == tableNum(TmpProjCostControl) && (element.categoryTableCostControl(element.args().parmObject())))
          #    {
          #        qb2                = qB.addDataSource(tableNum(ProjCategory));
          #        qb2.addLink(fieldNum(ForecastSales, ProjCategoryId), fieldNum(ProjCategory, CategoryId));
          #        qb2.fetchMode(0);
          #        qb2.joinMode(JoinMode::ExistsJoin);
          #
          #        criteriaCategoryGroupId        = qb2.addRange(fieldNum(ProjCategory, CategoryGroupId));
          #    }
          #
          #    else if (element.args().dataset()    == tableNum(ProjControlPeriodCostGroup))
          #    {
          #        qb2 = qB.addDataSource(tableNum(ProjTable));
          #
          #        qb2.addLink(fieldNum(ForecastSales,ProjId),
          #                    fieldNum(ProjTable,ProjId));
          #
          #        criteriaWIPProjId   = qb2.addRange(fieldNum(ProjTable,wipProject));
          #
          #        qb2.fetchMode(0);
          #
          #        qb3 = qB.addDataSource(tableNum(ProjControlCategory));
          #
          #        qb3.addLink(fieldNum(ForecastSales,ProjCategoryId),
          #                    fieldNum(ProjControlCategory,CategoryId));
          #
          #        criteriaControlId   = qb3.addRange(fieldNum(ProjControlCategory,ControlId));
          #        criteriaCostGroupId = qb3.addRange(fieldNum(ProjControlCategory,CostGroupId));
          #
          #        qb3.fetchMode(0);
          #
          #
          #    }
          #
          #    qb2                = qB.addDataSource(tableNum(ProjTable));
          #    qb2.addLink(fieldNum(ForecastSales,ProjId),
          #                fieldNum(ProjTable,ProjId));
          #    qb2.fetchMode(0);
          #
          #    criteriaProjInvoiceProjId   = qb2.addRange(fieldNum(ProjTable, ProjInvoiceProjId));
          #    criteriaWIPProjId           = qb2.addRange(fieldNum(ProjTable, wipProject));
          #    criteriaFixedPrice          = qb2.addRange(fieldNum(ProjTable, Type));
          #    criteriaTimeMaterial        = qb2.addRange(fieldNum(ProjTable, Type));
          #    criteriaInternal            = qb2.addRange(fieldNum(ProjTable, Type));
          #    criteriaCost                = qb2.addRange(fieldNum(ProjTable, Type));
          #    criteriaInvestment          = qb2.addRange(fieldNum(ProjTable, Type));
          #    criteriaTime                = qb2.addRange(fieldNum(ProjTable, Type));
          #    criteriaSorting1            = qb2.addRange(fieldNum(ProjTable, SortingId), 1);
          #    criteriaSorting2            = qb2.addRange(fieldNum(ProjTable, SortingId), 2);
          #    criteriaSorting3            = qb2.addRange(fieldNum(ProjTable, SortingId), 3);
          #    criteriaGroupId             = qb2.addRange(fieldNum(ProjTable, ProjGroupId));
          #    criteriaCustAccount         = qb2.addRange(fieldNum(ProjTable, CustAccount));
          #}
        ENDSOURCE
        SOURCE #delete
          #public void delete()
          #{
          #    super();
          #    dimensionDefaultingController.deleted();
          #    if (! forecastSales.RecId)
          #    {
          #        forecastSalesExpand_ds.executeQuery();
          #    }
          #}
        ENDSOURCE
        SOURCE #write
          #public void write()
          #{
          #    dimensionDefaultingController.writing();
          #    super();
          #
          #    if (forecastSales.InventDimId != inventDim.InventDimId)
          #    {
          #        inventDim.data(forecastSales.inventDim());
          #        inventDim_ds.setCurrent();
          #    }
          #
          #    forecastSalesExpand_ds.executeQuery();
          #}
        ENDSOURCE
        SOURCE #linkActive
          #public void linkActive()
          #{
          #    InventDimCombination    callerInventDimCombination;
          #    InventDim               inventDimFromInventDimCombination;
          #
          #    CustAccount             callerCustAccount;
          #    CustGroupId             callerCustGroupId;
          #
          #    ItemId                  callerItemId;
          #    ItemGroupId             callerItemGroupId;
          #
          #    ForecastInvent          callerForecastInvent;
          #    ForecastSales           bufferForecastSales;
          #
          #    HierarchyTreeTable      hierarchyTreeTable;
          #    smmActivities           smmActivities;
          #    ProjTable               projTable;
          #
          #    QueryBuildDataSource    qbs,qbsInventDim;
          #
          #    QueryBuildRange         criteriaRecId;
          #
          #    if (element.args().caller() && element.args().dataset())
          #    {
          #        switch (element.args().dataset())
          #        {
          #            case tableNum(ProjTable),
          #            tableNum(ProjControlPeriodCostGroup),
          #            tableNum(ProjInvoiceTable),
          #            tableNum(ProjWIPTable),
          #            tableNum(TmpProjStatistic),
          #            tableNum(ProjBudget),
          #            tableNum(ProjBudgetRevision),
          #            tablenum(TmpProjCashFlow),
          #            tablenum(ProjForecastEmpl): //WPA
          #                this.linkActiveProject();
          #                break;
          #
          #            case tableNum(CustTable):
          #                callerCustAccount = element.args().record().(fieldName2id(tableNum(CustTable), fieldStr(CustTable,AccountNum)));
          #                if (callerCustAccount)
          #                {
          #                    lockCustAccountId.value(true);
          #                    lockCustAccountId.allowEdit(false);
          #
          #                    critCustAccountId.text(callerCustAccount);
          #                    critCustAccountId.allowEdit(false);
          #                }
          #                break;
          #
          #
          #            case tableNum(CustGroup):
          #                callerCustGroupId = element.args().record().(fieldName2id(tableNum(CustGroup), fieldStr(CustGroup,CustGroup)));
          #                if (callerCustGroupId)
          #                {
          #                    lockCustGroupId.value(true);
          #                    lockCustGroupId.allowEdit(false);
          #
          #                    critCustGroupId.text(callerCustGroupId);
          #                    critCustGroupId.allowEdit(false);
          #                }
          #                break;
          #
          #            case tableNum(InventTable):
          #                callerItemId = element.args().record().(fieldName2id(tableNum(InventTable), fieldStr(InventTable,ItemId)));
          #                if (callerItemId)
          #                {
          #                    lockItemId.value(true);
          #                    lockItemId.allowEdit(false);
          #
          #                    critItemId.text(callerItemId);
          #                    critItemId.allowEdit(false);
          #                }
          #                break;
          #
          #            case tableNum(InventItemGroup):
          #                callerItemGroupId = element.args().record().(fieldName2id(tableNum(InventItemGroup), fieldStr(InventItemGroup,ItemGroupId)));
          #                if (callerItemGroupId)
          #                {
          #                    lockItemGroupId.value(true);
          #                    lockItemGroupId.allowEdit(false);
          #
          #                    critItemGroupId.text(callerItemGroupId);
          #                    critItemGroupId.allowEdit(false);
          #                }
          #                break;
          #
          #            case tableNum(ForecastInvent):        // if forecastInvent record is created from an expanded record then use the expandId instead of dynalink
          #                callerForecastInvent = element.args().record();
          #                select firstonly ExpandId,ModelId,ItemId from bufferForecastSales where bufferForecastSales.RecId == callerForecastInvent.TransRecId;
          #                if (bufferForecastSales.ModelId)
          #                {
          #                    lockModelId.value(true);
          #                    lockModelId.allowEdit(false);
          #                    critModelId.text(bufferForecastSales.ModelId);
          #                    critModelId.allowEdit(false);
          #                }
          #                if (bufferForecastSales.ItemId)
          #                {
          #                    lockItemId.value(true);
          #                    lockItemId.allowEdit(false);
          #                    critItemId.text(bufferForecastSales.ItemId);
          #                    critItemId.allowEdit(false);
          #                }
          #
          #                if ( bufferForecastSales.ExpandId)
          #                {
          #                    qbs = forecastSales_ds.query().dataSourceTable(tableNum(ForecastSales));
          #                    qbs.clearDynalinks();
          #                    forecastSalesExpand_ds.query().dataSourceTable(tableNum(ForecastSales)).clearDynalinks();
          #                    criteriaRecId = qbs.findRange(fieldName2id(tableNum(ForecastSales), fieldStr(ForecastSales,RecId)));
          #                    if (!criteriaRecId)
          #                    {
          #                        criteriaRecId = qbs.addRange(fieldName2id(tableNum(ForecastSales), fieldStr(ForecastSales,RecId)));
          #                    }
          #                    criteriaRecId.value(queryValue(bufferForecastSales.ExpandId));
          #
          #                }
          #            break;
          #
          #
          #            case tableNum(InventDimCombination):
          #                callerInventDimCombination = element.args().record();
          #
          #                if (callerInventDimCombination)
          #                {
          #                    inventDimFromInventDimCombination = callerInventDimCombination.inventDim();
          #
          #                    lockItemId.value(true);
          #                    lockItemId.allowEdit(false);
          #
          #                    critItemId.text(callerInventDimCombination.ItemId);
          #                    critItemId.allowEdit(false);
          #
          #                    qbs = forecastSales_ds.query().dataSourceTable(tableNum(ForecastSales));
          #                    qbs.clearDynalinks();
          #                    qbsInventDim = inventDim_ds.query().dataSourceTable(tableNum(InventDim));
          #
          #                    InventDim::queryAddRangeAndValueProductDim(qbsInventDim, inventDimFromInventDimCombination, EcoResProductDimGroupSetup::newItemId(callerInventDimCombination.ItemId), false);
          #                }
          #            break;
          #
          #            case (tableNum(HierarchyTreeTable)):
          #                hierarchyTreeTable = element.args().record();
          #
          #                smmActivities = smmActivities::findWithRecId(hierarchyTreeTable.RefRecId);
          #                criteriaActivityId.value(queryValue(smmActivities.ActivityNumber));
          #                projTable = HierarchyTreeTable::findAssociation(smmActivities, tableNum(ProjTable));
          #
          #                criteriaProjId.value(projTable.ProjId);
          #
          #                break;
          #        }
          #    }
          #    else if (element.args().dataset()   == tableNum(TmpProjStatistic))
          #    {
          #        this.linkActiveProject();
          #    }
          #    else if (element.args().dataset()   == tableNum(TmpProjCostControl))
          #    {
          #        this.linkActiveProject();
          #    }
          #    else if (element.args().dataset()   == tableNum(TmpProjCashFlow))
          #    {
          #        this.linkActiveProject();
          #    }
          #
          #    super();
          #
          #    element.updateFields();
          #
          #}
          #
        ENDSOURCE
        SOURCE #initValue
          #public void initValue()
          #{
          #    forecastSales.ItemId = critItemId.text();
          #
          #    super();
          #    forecastSales.ModelId = modelId;
          #    forecastSales.initFromProjTable(ProjTable::find(projId));
          #
          #    if (calledFromProject)
          #    {
          #        forecastSales.SalesQty  = 1;
          #        forecastSales.InventQty = 1;
          #    }
          #
          #    if (lockModelId.value() && forecastSales.ModelId != critModelId.text())  // if initFromProjTable finds a modelId and the modelId is locked
          #    {
          #        forecastSales.ModelId = critModelId.text();
          #    }
          #
          #    element.updateDesign(InventDimFormDesignUpdate::FieldChange);
          #
          #    if (projForecastEmpl)
          #    {
          #        forecastSales.RefRecId = projForecastEmpl.RecId;
          #    }
          #    inventDim.data(InventDim::find(forecastSales.InventDimId));
          #    inventDim.clearNotSelectedDim(inventDimFormSetup.parmDimParmEnabled());
          #}
          #
        ENDSOURCE
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    boolean ret;
          #
          #    inventDim.clearNotSelectedDim(inventDimFormSetup.parmDimParmEnabled());
          #    forecastSales.InventDimId = InventDim::findOrCreate(inventDim).InventDimId;
          #
          #    ret = super();
          #
          #    if (!element.validateCaller())
          #    {
          #        ret = false;
          #    }
          #
          #    if (ret && calledFromProject)
          #    {
          #        ret = element.validateProject();
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    super();
          #
          #    qB = this.query().dataSourceNo(1);
          #
          #    if (calledFromProject)
          #    {
          #        this.initFromProject();
          #    }
          #    else
          #    {
          #        criteriaBudgetedField = qB.addRange(fieldNum(ForecastSales, ProjForecastBudgetType));
          #        criteriaBudgetedField.value(queryValue(ProjForecastBudgetType::None));
          #    }
          #
          #    criteriaExpand_1      = qB.addRange(fieldNum(ForecastSales,ExpandId));
          #
          #    criteriaModelId       = qB.addRange(fieldNum(ForecastSales,ModelId));
          #    criteriaCustGroupId   = qB.addRange(fieldNum(ForecastSales,CustGroupId));
          #    criteriaCustAccountId = qB.addRange(fieldNum(ForecastSales,CustAccountId));
          #    criteriaItemGroupId   = qB.addRange(fieldNum(ForecastSales,ItemGroupId));
          #    criteriaItemId        = qB.addRange(fieldNum(ForecastSales,ItemId));
          #    criteriaActivityId    = qB.addRange(fieldNum(ForecastSales, ActivityNumber));
          #}
        ENDSOURCE
        SOURCE #executeQuery
          #public void executeQuery()
          #{
          #    criteriaExpand_1.value('0');
          #
          #    criteriaModelId.value(       lockModelId.value()       ? queryValue(critModelId.text())       : SysQuery::valueUnlimited() );
          #    criteriaCustGroupId.value(   lockCustGroupId.value()   ? queryValue(critCustGroupId.text())   : SysQuery::valueUnlimited() );
          #    criteriaCustAccountId.value( lockCustAccountId.value() ? queryValue(critCustAccountId.text()) : SysQuery::valueUnlimited() );
          #    criteriaItemGroupId.value(   lockItemGroupId.value()   ? queryValue(critItemGroupId.text())   : SysQuery::valueUnlimited() );
          #    criteriaItemId.value(        lockItemId.value()        ? queryValue(critItemId.text())        : SysQuery::valueUnlimited() );
          #
          #    super();
          #}
          #
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    int             ret;
          #    boolean         canEdit = !forecastSales.derived();
          #    ForecastModel   forecastModel;
          #    boolean         isBudgetForecast;
          #
          #    ret = super();
          #
          #    if (canEdit && forecastSales.ModelId)
          #    {
          #        forecastModel = ForecastModel::find(HeadingSub::Heading, forecastSales.ModelId);
          #        if (forecastModel && forecastModel.Blocked)
          #        {
          #            canEdit = false;
          #        }
          #    }
          #
          #    this.allowEdit(canEdit);
          #    this.allowDelete(canEdit);
          #
          #    element.buttonCoverage();
          #
          #    this.updateForecastSalesFields();
          #
          #    element.updateDesign(InventDimFormDesignUpdate::Active);
          #
          #    forecastSalesExpand_ds.executeQuery();
          #
          #    oldCurrency = forecastSales.Currency;
          #
          #    dimensionDefaultingController.activated();
          #
          #    if (forecastSales.ProjForecastBudgetType == ProjForecastBudgetType::None)
          #    {
          #        isBudgetForecast = true;
          #    }
          #
          #    forecastSales_ds.allowEdit(isBudgetForecast);
          #    forecastSales_ds.allowDelete(isBudgetForecast);
          #
          #    return ret;
          #}
          #
        ENDSOURCE
        SOURCE #linkActiveProject
          #void linkActiveProject()
          #{
          #    ProjInvoiceTable            projInvoiceTable;
          #    ProjWIPTable                projWIPTable;
          #    QueryBuildRange             rangeProjId;
          #    ProjBudget                  projBudget;
          #    ProjBudgetRevision          projBudgetRevision;
          #    ProjId                      localprojId;
          #
          #    ProjTable                   projTable;
          #    ProjControlPeriodCostGroup  projControlPeriodCostGroup;
          #
          #    #define.star('*')
          #
          #    if (calledFromProject)
          #    {
          #        switch (element.args().dataset())
          #        {
          #            case tableNum(ProjBudget):
          #                projBudget = element.args().record();
          #                criteriaProjId.value(queryValue(projBudget.RootProjId) + #star);
          #                break;
          #
          #            case tableNum(ProjBudgetRevision):
          #                projBudgetRevision = element.args().record();
          #                criteriaProjId.value(queryValue(ProjBudget::find(projBudgetRevision.ProjBudget).RootProjId) + #star);
          #                break;
          #
          #            case tableNum(ProjTable):
          #
          #                projTable       = element.args().record();
          #                localprojId     = projTable.ProjId;
          #                projId          = projTable.ProjId;
          #                criteriaProjId.value(projTable.ProjId+'*');
          #                break;
          #
          #            case tableNum(ProjInvoiceTable):
          #                rangeProjId    = forecastSales_ds.query().dataSourceTable(tableNum(ForecastSales)).findRange(fieldNum(ForecastSales,ProjId));
          #
          #                while (rangeProjId)
          #                {
          #                    forecastSales_ds.query().dataSourceTable(tableNum(ForecastSales)).clearRange(fieldNum(ForecastSales,ProjId));
          #                    rangeProjId    = forecastSales_ds.query().dataSourceTable(tableNum(ForecastSales)).findRange(fieldNum(ForecastSales,ProjId));
          #                }
          #
          #                projInvoiceTable   = element.args().record();
          #
          #                while select ProjId from projTable
          #                    where projTable.ProjInvoiceProjId   == projInvoiceTable.ProjInvoiceProjId
          #                {
          #                    forecastSales_ds.query().dataSourceTable(tableNum(ForecastSales)).addRange(fieldNum(ForecastSales,ProjId)).value(projTable.ProjId);
          #                }
          #                modelId = ProjParameters::find().ModelId;
          #                break;
          #
          #            case tableNum(ProjWIPTable)     :
          #                rangeProjId    = forecastSales_ds.query().dataSourceTable(tableNum(ForecastSales)).findRange(fieldNum(ForecastSales,ProjId));
          #
          #                while (rangeProjId)
          #                {
          #                    forecastSales_ds.query().dataSourceTable(tableNum(ForecastSales)).clearRange(fieldNum(ForecastSales,ProjId));
          #                    rangeProjId    = forecastSales_ds.query().dataSourceTable(tableNum(ForecastSales)).findRange(fieldNum(ForecastSales,ProjId));
          #                }
          #
          #                projWIPTable   =   element.args().record();
          #
          #                while select ProjId from projTable
          #                    where projTable.wipProject  == projWIPTable.ProjId
          #                {
          #                    forecastSales_ds.query().dataSourceTable(tableNum(ForecastSales)).addRange(fieldNum(ForecastSales,ProjId)).value(projTable.ProjId);
          #                }
          #                modelId = ProjParameters::find().ModelId;
          #                break;
          #
          #
          #            case tableNum(ProjControlPeriodCostGroup):
          #
          #                projControlPeriodCostGroup  = element.args().record();
          #
          #                if (projControlPeriodCostGroup.costType() != ProjCostType::Item)
          #                    element.close();
          #
          #                critModelId.text(projControlPeriodCostGroup.projControlPeriod().ModelId);
          #                lockModelId.value(critModelId.text() ? true : false );
          #
          #                localprojId                  = projControlPeriodCostGroup.ProjId;
          #                projId                      = projControlPeriodCostGroup.ProjId;
          #
          #                criteriaControlId.value(projControlPeriodCostGroup.ControlId);
          #                criteriaWIPProjId.value(localprojId);
          #
          #                qb2.joinMode(JoinMode::ExistsJoin);
          #                criteriaCostGroupId.value(projControlPeriodCostGroup.CostGroupId);
          #
          #                break;
          #
          #            case tableNum(TmpProjStatistic):
          #
          #                if (projStatistic)   //          linkActive called again .criteria changed... close form
          #                    element.close();
          #
          #                projStatistic   = element.args().parmObject();
          #                projId          = projStatistic.parmProjId();
          #
          #                if (projStatistic.parmItem())
          #                {
          #                    critModelId.text(projStatistic.parmForecastModelId());
          #                    lockModelId.value(projStatistic.parmForecastModelId() ? true : false );
          #
          #                    ledgerFromDate  = projStatistic.parmLedgerFromDate();
          #                    ledgerToDate    = projStatistic.parmLedgerToDate();
          #                    if (projStatistic.parmProjFromDate() || projStatistic.parmProjToDate())
          #                        criteriaTransDate.value(strFmt('%1..%2',queryValue(projStatistic.parmProjFromDate()),queryValue(projStatistic.parmProjToDate())));
          #
          #                    if (projStatistic.parmProjCategoryId())
          #                    {
          #                        criteriaCategoryId.value(projStatistic.parmProjCategoryId());
          #                    }
          #                    if (element.categoryTable(element.args().parmObject()))
          #                    {
          #                        criteriaCategoryGroupId.value(projStatistic.parmCategoryGroupId());
          #                    }
          #                    if (projStatistic.parmFixedPrice())
          #                    {
          #                        criteriaFixedPrice.value(queryValue(ProjType::FixedPrice));
          #                    }
          #                    if (projStatistic.parmTimeMaterial())
          #                    {
          #                        criteriaTimeMaterial.value(queryValue(ProjType::TimeMaterial));
          #                    }
          #                    if (projStatistic.parmInternalCost())
          #                    {
          #                        criteriaInternal.value(queryValue(ProjType::Cost));
          #                    }
          #                    if (projStatistic.parmInternalCost())
          #                    {
          #                        criteriaCost.value(queryValue(ProjType::Internal));
          #                    }
          #                    if (projStatistic.parmInvestment())
          #                    {
          #                        criteriaInvestment.value(queryValue(ProjType::Investment));
          #                    }
          #                    if (projStatistic.parmTime())
          #                    {
          #                        criteriaTime.value(queryValue(ProjType::Time));
          #                    }
          #
          #                    if (projStatistic.parmSorting1())
          #                    {
          #                        criteriaSorting1.value(queryValue(projStatistic.parmSorting1()));
          #                    }
          #                    if (projStatistic.parmSorting2())
          #                    {
          #                        criteriaSorting2.value(queryValue(projStatistic.parmSorting2()));
          #                    }
          #                    if (projStatistic.parmSorting3())
          #                    {
          #                        criteriaSorting3.value(queryValue(projStatistic.parmSorting3()));
          #                    }
          #                    if (projStatistic.parmCustAccount())
          #                    {
          #                        criteriaCustAccount.value(queryValue(projStatistic.parmCustAccount()));
          #                    }
          #                    if (projStatistic.parmProjGroupId())
          #                    {
          #                        criteriaGroupId.value(queryValue(projStatistic.parmProjGroupId()));
          #                    }
          #
          #                    if (projStatistic.parmProjTree())
          #                    {
          #                        criteriaProjId.value(projStatistic.parmProjId()+ #star);
          #                    }
          #                    else
          #                    if (projStatistic.parmProjId())
          #                    {
          #                        criteriaProjId.value(queryValue(projStatistic.parmProjId()));
          #                    }
          #
          #                    if (projStatistic.parmProjWIPId())
          #                    {
          #                        criteriaWIPProjId.value(queryValue(projStatistic.parmProjWIPId()));
          #                    }
          #
          #                    if (projStatistic.parmProjInvoiceProjId())
          #                    {
          #                        criteriaProjInvoiceProjId.value(queryValue(projStatistic.parmProjInvoiceProjId()));
          #                    }
          #                }
          #                else
          #                {
          #                    criteriaProjId.value(queryValue(SysQuery::valueEmptyString()));
          #                }
          #
          #                break;
          #
          #            case tableNum(TmpProjCashFlow):
          #
          #                if (projCashFlow)   //          linkActive called again .criteria changed... close form
          #                    element.close();
          #
          #                projCashFlow   = element.args().parmObject();
          #                projId          = projCashFlow.parmProjId();
          #
          #                if (projCashFlow.parmItem())
          #                {
          #                    critModelId.text(projCashFlow.parmForecastModelId());
          #                    lockModelId.value(projCashFlow.parmForecastModelId() ? true : false );
          #
          #                    /*
          #                    ledgerFromDate  = projStatistic.parmLedgerFromDate();
          #                    ledgerToDate    = projStatistic.parmLedgerToDate();*/
          #
          #                    if (projCashFlow.parmProjectFromDate() || projCashFlow.parmProjectToDate())
          #                        criteriaTransDate.value(strFmt('%1..%2',queryValue(projCashFlow.parmProjectFromDate()),queryValue(projCashFlow.parmProjectToDate())));
          #
          #                    if (projCashFlow.parmCategoryId())
          #                        criteriaCategoryId.value(projCashFlow.parmCategoryId());
          #
          #                    if (element.categoryTableCashFlow(element.args().parmObject()))
          #                        criteriaCategoryGroupId.value(projCashFlow.parmCategoryGroupId());
          #
          #                    if (projCashFlow.parmFixedPrice())
          #                        criteriaFixedPrice.value(queryValue(ProjType::FixedPrice));
          #                    if (projCashFlow.parmTimeMaterial())
          #                        criteriaTimeMaterial.value(queryValue(ProjType::TimeMaterial));
          #                    if (projCashFlow.parmInternalCost())
          #                        criteriaInternal.value(queryValue(ProjType::Cost));
          #                    if (projCashFlow.parmInternalCost())
          #                        criteriaCost.value(queryValue(ProjType::Internal));
          #                    if (projCashFlow.parmInvestment())
          #                        criteriaInvestment.value(queryValue(ProjType::Investment));
          #                    if (projCashFlow.parmTimeProject())
          #                        criteriaTime.value(queryValue(ProjType::Time));
          #
          #                    if (projCashFlow.parmSorting1())
          #                        criteriaSorting1.value(queryValue(projCashFlow.parmSorting1()));
          #                    if (projCashFlow.parmSorting2())
          #                        criteriaSorting2.value(queryValue(projCashFlow.parmSorting2()));
          #                    if (projCashFlow.parmSorting3())
          #                        criteriaSorting3.value(queryValue(projCashFlow.parmSorting3()));
          #
          #                    if (projCashFlow.parmCustAccount())
          #                        criteriaCustAccount.value(queryValue(projCashFlow.parmCustAccount()));
          #                    if (projCashFlow.parmProjGroupId())
          #                        criteriaGroupId.value(queryValue(projCashFlow.parmProjGroupId()));
          #
          #                    if (projCashFlow.parmProjTree())
          #                        criteriaProjId.value(projCashFlow.parmProjId()+ #star);
          #                    else
          #                    {
          #                        if (projCashFlow.parmProjId())
          #                        {
          #                            criteriaProjId.value(queryValue(projCashFlow.parmProjId()));
          #                        }
          #                    }
          #                    if (projCashFlow.parmProjWIPId())
          #                        criteriaWIPProjId.value(queryValue(projCashFlow.parmProjWIPId()));
          #
          #                    if (projCashFlow.parmProjInvoiceProjId())
          #                        criteriaProjInvoiceProjId.value(queryValue(projCashFlow.parmProjInvoiceProjId()));
          #
          #                }
          #                else
          #                    criteriaProjId.value(queryValue(SysQuery::valueEmptyString()));
          #
          #                break;
          #
          #            case tableNum(TmpProjCostControl):
          #
          #                if (projCostControl)   //          linkActive called again .criteria changed... close form
          #                    element.close();
          #
          #                projCostControl = element.args().parmObject();
          #                projId          = projCostControl.parmProjId();
          #
          #                if (projCostControl.parmItem())
          #                {
          #                    switch(projCostControl.parmModelType())
          #                    {
          #                        case ProjForecastModelType::Original:
          #                            critModelId.text(projCostControl.parmOriginalForecastModelId());
          #                            lockModelId.value(projCostControl.parmOriginalForecastModelId() ? true : false );
          #                            break;
          #                        case ProjForecastModelType::Remaining:
          #                            critModelId.text(projCostControl.parmRemainingForecastModelId());
          #                            lockModelId.value(projCostControl.parmRemainingForecastModelId() ? true : false );
          #                            break;
          #                        case ProjForecastModelType::Total:
          #                            critModelId.text(projCostControl.parmTotalForecastModelId());
          #                            lockModelId.value(projCostControl.parmTotalForecastModelId() ? true : false );
          #                            break;
          #                    }
          #
          #                    ledgerFromDate  = projCostControl.parmLedgerTransDateFrom();
          #                    ledgerToDate    = projCostControl.parmLedgerTransDateTo();
          #
          #                    if (projCostControl.parmProjTransDateFrom() || projCostControl.parmProjTransDateTo())
          #                    {
          #                        criteriaTransDate.value(strFmt('%1..%2',queryValue(projCostControl.parmProjTransDateFrom()),queryValue(projCostControl.parmProjTransDateTo())));
          #                    }
          #
          #                    if (projCostControl.parmProjCategoryId())
          #                    {
          #                        criteriaCategoryId.value(projCostControl.parmProjCategoryId());
          #                    }
          #
          #                    if (projCostControl.parmCategoryGroupId())
          #                    {
          #                        criteriaCategoryGroupId.value(projCostControl.parmCategoryGroupId());
          #                    }
          #
          #                    if (projCostControl.parmFixedPrice())
          #                    {
          #                        criteriaFixedPrice.value(queryValue(ProjType::FixedPrice));
          #                    }
          #                    if (projCostControl.parmTimeMaterial())
          #                    {
          #                        criteriaTimeMaterial.value(queryValue(ProjType::TimeMaterial));
          #                    }
          #                    if (projCostControl.parmInternalCost())
          #                    {
          #                        criteriaInternal.value(queryValue(ProjType::Cost));
          #                    }
          #                    if (projCostControl.parmInternalCost())
          #                    {
          #                        criteriaCost.value(queryValue(ProjType::Internal));
          #                    }
          #                    if (projCostControl.parmInvestment())
          #                    {
          #                        criteriaInvestment.value(queryValue(ProjType::Investment));
          #                    }
          #                    if (projCostControl.parmTime())
          #                    {
          #                        criteriaTime.value(queryValue(ProjType::Time));
          #                    }
          #
          #                    if (projCostControl.parmProjSorting1())
          #                    {
          #                        criteriaSorting1.value(queryValue(projCostControl.parmProjSorting1()));
          #                    }
          #                    if (projCostControl.parmProjSorting2())
          #                    {
          #                        criteriaSorting2.value(queryValue(projCostControl.parmProjSorting2()));
          #                    }
          #                    if (projCostControl.parmProjSorting3())
          #                    {
          #                        criteriaSorting3.value(queryValue(projCostControl.parmProjSorting3()));
          #                    }
          #
          #                    if (projCostControl.parmCustomerAccount())
          #                    {
          #                        criteriaCustAccount.value(queryValue(projCostControl.parmCustomerAccount()));
          #                    }
          #
          #                    if (projCostControl.parmProjGroupId())
          #                    {
          #                        criteriaGroupId.value(queryValue(projCostControl.parmProjGroupId()));
          #                    }
          #
          #                    if (projCostControl.parmProjTree())
          #                    {
          #                        criteriaProjId.value(projCostControl.parmProjId()+ #star);
          #                    }
          #                    else
          #                    {
          #                        if (projCostControl.parmProjId())
          #                        {
          #                            criteriaProjId.value(queryValue(projCostControl.parmProjId()));
          #                        }
          #                    }
          #
          #                    if (projCostControl.parmProjWIPId())
          #                    {
          #                        criteriaWIPProjId.value(queryValue(projCostControl.parmProjWIPId()));
          #                    }
          #
          #                    if (projCostControl.parmProjInvoiceProjId())
          #                    {
          #                        criteriaProjInvoiceProjId.value(queryValue(projCostControl.parmProjInvoiceProjId()));
          #                    }
          #                }
          #                else
          #                {
          #                    criteriaProjId.value(queryValue(SysQuery::valueEmptyString()));
          #                }
          #
          #                break;
          #            //WPA -->
          #            case tablenum(ProjForecastEmpl):
          #                projForecastEmpl    = element.args().record();
          #                projTable           = projTable::find(projForecastEmpl.ProjId);
          #                modelId             = projForecastEmpl.ModelId;
          #                localprojId         = projTable.ProjId;
          #                projId              = projTable.ProjId;
          #                criteriaProjId.value(queryValue(projTable.ProjId));
          #                break;
          #            //WPA <--
          #        }
          #        this.executeQuery();
          #    }
          #}
        ENDSOURCE
        SOURCE #updateAmount
          #public void updateAmount()
          #{
          #    forecastSales.Amount= forecastSales.calcPrice2LineAmount(forecastSales.SalesQty,true);
          #    ctrlGrossAmount.update();
          #}
        ENDSOURCE
        SOURCE #updateForecastSalesFields
          #public void updateForecastSalesFields()
          #{
          #    forecastSales_ds.object(fieldNum(ForecastSales,Freq)).allowEdit(    forecastSales.BudgetMap::mustEnableFreq());
          #    forecastSales_ds.object(fieldNum(ForecastSales,FreqCode)).allowEdit(forecastSales.BudgetMap::mustEnableFreqCode());
          #    forecastSales_ds.object(fieldNum(ForecastSales,KeyId)).allowEdit(   forecastSales.BudgetMap::mustEnableKeyId());
          #    forecastSales_ds.object(fieldNum(ForecastSales,EndDate)).allowEdit( forecastSales.BudgetMap::mustEnableEndDate());
          #
          #    forecastSales_ds.object(fieldNum(ForecastSales,CustAccountId)).allowEdit(!lockCustAccountId.allowEdit() || forecastSales.ProjId ? false : true);
          #    forecastSales_ds.object(fieldNum(ForecastSales,CustGroupId)).allowEdit(!lockCustGroupId.allowEdit() || forecastSales.CustAccountId ? false : true);
          #
          #    forecastSales_ds.object(fieldNum(ForecastSales,ItemGroupId)).allowEdit(!lockItemGroupId.allowEdit() || forecastSales.ItemId ? false : true);
          #
          #
          #    if(forecastSales.isProjLumpSum())
          #    {
          #        forecastSales_ds.object(fieldNum(ForecastSales,ItemId)).allowEdit(false);
          #        forecastSales_ds.object(fieldNum(ForecastSales,SalesQty)).allowEdit(false);
          #    }
          #    else
          #    {
          #        forecastSales_ds.object(fieldNum(ForecastSales,ItemId)).allowEdit(lockItemId.allowEdit());
          #        forecastSales_ds.object(fieldNum(ForecastSales,SalesQty)).allowEdit(true);
          #    }
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #InventDim
          Table               #InventDim
          Index               #DimIdIdx
          JoinSource          #ForecastSales
          LinkType            #InnerJoin
          DelayActive         #No
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD inventBatchId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.setModifiedPriceAgreement(fieldNum(InventDim,InventBatchId));
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD wMSLocationId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.setModifiedPriceAgreement(fieldNum(InventDim,wmsLocationId));
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD wMSPalletId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.setModifiedPriceAgreement(fieldNum(InventDim,wmsPalletId));
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD inventSerialId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.setModifiedPriceAgreement(fieldNum(InventDim,InventSerialId));
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventLocationId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.setModifiedPriceAgreement(fieldNum(InventDim,InventLocationId));
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD configId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.setModifiedPriceAgreement(fieldNum(InventDim,ConfigId));
                #    element.updateCostPrice();
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventSizeId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.setModifiedPriceAgreement(fieldNum(InventDim,InventSizeId));
                #    element.updateCostPrice();
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventColorId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.setModifiedPriceAgreement(fieldNum(InventDim,InventColorId));
                #    element.updateCostPrice();
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventSiteId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.setModifiedPriceAgreement(fieldNum(InventDim,InventSiteId));
                #    element.updateCostPrice();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ForecastSalesExpand
          Table               #ForecastSales
          Index               #ExpandIdx
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          AutoSearch          #No
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    element.buttonCoverage();
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    QueryBuildDataSource    qbsForecastSalesExpand;
          #
          #    super();
          #
          #    qbsForecastSalesExpand = this.query().dataSourceTable(tableNum(ForecastSales));
          #
          #    criteriaReport    = qbsForecastSalesExpand.addRange(fieldNum(ForecastSales,Report));
          #    criteriaExpand_2  = qbsForecastSalesExpand.addRange(fieldNum(ForecastSales,ExpandId));
          #
          #    qbsForecastSalesExpand.addSortField(fieldName2id(tableNum(ForecastSales),fieldStr(ForecastSales,StartDate)));
          #}
        ENDSOURCE
        SOURCE #executeQuery
          #public void executeQuery()
          #{
          #    if ( ! forecastSales.RecId)                     // then query must not find any records
          #    {
          #        criteriaExpand_2.value(queryValue('! 0 '));
          #        criteriaReport.value(queryValue(NoYes::No));
          #    }
          #    else
          #    {
          #        criteriaExpand_2.value(queryValue(forecastSales.RecId));
          #        criteriaReport.value(SysQuery::valueUnlimited());
          #    }
          #
          #    super();
          #
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
  ENDOBJECTBANK
  
  REFERENCEDATASOURCES
  ENDREFERENCEDATASOURCES
  
  JOINS
    InventDim ForecastSales
  ENDJOINS
  
  PARTREFERENCES
  ENDPARTREFERENCES
  
  DESIGN
    PROPERTIES
      Caption             #@SYS15056
      HideIfEmpty         #No
    ENDPROPERTIES
    
    CONTAINER
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #ActionPane
          ElementPosition     #715827882
          Style               #Strip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #ActionPaneTab
          ElementPosition     #1431655764
          HierarchyParent     #ActionPane
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroup
          ElementPosition     #1431655764
          HierarchyParent     #ActionPaneTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #NewDeleteGroup
          ElementPosition     #477218588
          HierarchyParent     #ActionPaneTab
          DataSource          #ForecastSales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #ItemSpecification_gridForecastItem
          Height              #Column height
          ElementPosition     #1073741822
          HierarchyParent     #TabPageItemSpecification
          DataSource          #ForecastSales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #Overview_GridForecastSales
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1073741822
          HierarchyParent     #TabPageOverview
          DataSource          #ForecastSales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #Overview_GridForecastSalesExploded
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #Overview_ForecastSalesExpand
          VisibleRows         #6
          DataSource          #ForecastSalesExpand
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Column1
          ElementPosition     #858993458
          HierarchyParent     #Criteria
          FrameType           #None
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Column11
          ElementPosition     #1073741822
          HierarchyParent     #Column1
          FrameType           #None
          LeftMargin          #0
          RightMargin         #0
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Column12
          ElementPosition     #1610612733
          HierarchyParent     #Column1
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Column2
          ElementPosition     #1288490187
          HierarchyParent     #Criteria
          FrameType           #None
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Column21
          ElementPosition     #1073741822
          HierarchyParent     #Column2
          FrameType           #None
          LeftMargin          #0
          RightMargin         #0
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Column22
          ElementPosition     #1610612733
          HierarchyParent     #Column2
          FrameType           #None
          LeftMargin          #0
          RightMargin         #0
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Column3
          ElementPosition     #1717986916
          HierarchyParent     #Criteria
          FrameType           #None
          LeftMargin          #0
          RightMargin         #0
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Column31
          ElementPosition     #1073741822
          HierarchyParent     #Column3
          FrameType           #None
          LeftMargin          #0
          RightMargin         #0
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Column32
          ElementPosition     #1610612733
          HierarchyParent     #Column3
          FrameType           #None
          LeftMargin          #0
          RightMargin         #0
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ColumnsItem
          Width               #Column width
          ElementPosition     #1610612733
          HierarchyParent     #TabPageItemSpecification
          FrameType           #None
          Columns             #4
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Criteria
          ElementPosition     #1431655764
          HierarchyParent     #TabPageFilter
          Caption             #@SYS2163
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CtrlSplit
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #5
          ElementPosition     #1431655764
          HierarchyParent     #TabPageOverview
          FrameType           #Raised 3D
          BackgroundColor     #Window background
          HideIfEmpty         #No
          AlignChild          #No
        ENDPROPERTIES
        
        METHODS
          SOURCE #mouseDown
            #public int mouseDown(
            #    int     x,
            #    int     y,
            #    int     button,
            #    boolean ctrl,
            #    boolean shift)
            #{
            #    int ret;
            #
            #    ret = super(x, y, button, ctrl, shift);
            #
            #    return formSplitter.mouseDown(x, y, button, ctrl, shift);
            #}
          ENDSOURCE
          SOURCE #mouseMove
            #public int mouseMove(
            #    int     x,
            #    int     y,
            #    int     button,
            #    boolean ctrl,
            #    boolean shift)
            #{
            #    int ret;
            #
            #    ret = super(x, y, button, ctrl, shift);
            #
            #    return formSplitter.mouseMove(x,y,button,ctrl,shift);
            #}
          ENDSOURCE
          SOURCE #mouseUp
            #public int mouseUp(
            #    int     x,
            #    int     y,
            #    int     button,
            #    boolean ctrl,
            #    boolean shift)
            #{
            #    int ret;
            #
            #    ret = super(x, y, button, ctrl, shift);
            #
            #    return formSplitter.mouseUp(x, y, button, ctrl, shift);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Dates
          ElementPosition     #1431655764
          HierarchyParent     #GroupRight
          DataSource          #ForecastSales
          DataGroup           #Dates
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ForecastSalesItem_Inventorydimensions
          ElementPosition     #715827882
          HierarchyParent     #ItemSpecification_gridForecastItem
          BackgroundColor     #Window background
          DataSource          #InventDim
          DataGroup           #InventoryDimensions
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #General_Budget
          ElementPosition     #1288490187
          HierarchyParent     #TabPageGeneral
          Caption             #@SYS15436
          DataSource          #ForecastSales
          DataGroup           #SalesForecast
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #General_Identification
          ElementPosition     #858993458
          HierarchyParent     #TabPageGeneral
          DataSource          #ForecastSales
          DataGroup           #Identification
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #General_Salestax
          ElementPosition     #1717986916
          HierarchyParent     #TabPageGeneral
          DataSource          #ForecastSales
          DataGroup           #SalesTax
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupLeft
          ElementPosition     #858993458
          HierarchyParent     #ProjectTab
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupMiddle
          ElementPosition     #1288490187
          HierarchyParent     #ProjectTab
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupRight
          ElementPosition     #1717986916
          HierarchyParent     #ProjectTab
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Inventory
          ElementPosition     #1717986916
          HierarchyParent     #ColumnsItem
          Caption             #@SYS981
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #InventoryDimension
          ElementPosition     #1431655764
          HierarchyParent     #TabPageDimensionTab
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Inventorydimensions1
          ElementPosition     #1431655764
          HierarchyParent     #InventoryDimension
          DataSource          #InventDim
          DataGroup           #InventoryDimensions
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Overview_ForecastSalesExpand
          Width               #Column width
          Height              #Column height
          ElementPosition     #1789569705
          HierarchyParent     #TabPageOverview
          Caption             #@SYS28034
          FrameOptionButton   #Hide
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Overview_GroupAllocation
          ElementPosition     #1073741823
          HierarchyParent     #TabPageOverview
          FrameType           #Edged 3D
          Caption             #@SYS26697
          ArrangeMethod       #Horizontal, flush right
          AlignChildren       #No
          AlignChild          #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Overview_Inventorydimensions
          ElementPosition     #1136903103
          HierarchyParent     #Overview_GridForecastSales
          BackgroundColor     #Window background
          DataSource          #InventDim
          DataGroup           #InventoryDimensions
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PdsCatchWeight
          ElementPosition     #2084322359
          HierarchyParent     #Overview_GridForecastSales
          BackgroundColor     #Window background
          DataSource          #ForecastSales
          DataGroup           #PdsCatchWeight
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PdsCatchWeight1
          ElementPosition     #1342177278
          HierarchyParent     #Overview_GridForecastSalesExploded
          BackgroundColor     #Window background
          DataSource          #ForecastSalesExpand
          DataGroup           #PdsCatchWeight
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PdsCatchWeight2
          ElementPosition     #1744830462
          HierarchyParent     #ItemSpecification_gridForecastItem
          BackgroundColor     #Window background
          DataSource          #ForecastSales
          DataGroup           #PdsCatchWeight
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #PdsCatchWeight3
          ElementPosition     #2013265918
          HierarchyParent     #ColumnsItem
          DataSource          #ForecastSales
          DataGroup           #PdsCatchWeight
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Price_Discount
          ElementPosition     #1288490187
          HierarchyParent     #ColumnsItem
          Caption             #@SYS19789
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Prices
          ElementPosition     #858993458
          HierarchyParent     #ColumnsItem
          Caption             #@SYS12983
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProjectAdministration
          ElementPosition     #1717986916
          HierarchyParent     #GroupMiddle
          DataSource          #ForecastSales
          DataGroup           #ProjectAdministration
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProjectCostPrice
          ElementPosition     #858993458
          HierarchyParent     #GroupMiddle
          DataSource          #ForecastSales
          DataGroup           #ProjectCostPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProjectIdentification
          ElementPosition     #1073741822
          HierarchyParent     #GroupLeft
          DataSource          #ForecastSales
          DataGroup           #ProjectIdentification
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProjectSalesPrice
          ElementPosition     #1288490187
          HierarchyParent     #GroupMiddle
          DataSource          #ForecastSales
          DataGroup           #ProjectSalesPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProjectTransaction
          ElementPosition     #1610612733
          HierarchyParent     #GroupLeft
          DataSource          #ForecastSales
          DataGroup           #ProjectTransaction
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #InventButton
          AutoDeclaration     #Yes
          HelpText            #@SYS28780
          ElementPosition     #1288490184
          HierarchyParent     #ButtonGroup
          Text                #@SYS981
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #ProjectButton
          HelpText            #@SYS59214
          ElementPosition     #1503238548
          HierarchyParent     #ButtonGroup
          Text                #@SYS80304
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #ProjectIdentification_ProjFundingSource
          ConfigurationKey    #ProjAdvFunding
          ElementPosition     #954437176
          HierarchyParent     #ProjectIdentification
          DataSource          #ForecastSales
          ReferenceField      #ProjFundingSource
          ReplacementFieldGroup #FundingSourceName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #Tab
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          Tabs                #6
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #ProjectTab
          ConfigurationKey    #ProjBasicForecast
          ElementPosition     #2013265918
          HierarchyParent     #Tab
          Caption             #@SYS4534
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabFinancialDimensions
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          ElementPosition     #2080374782
          HierarchyParent     #Tab
          Caption             #@SYS101181
          HideIfEmpty         #No
        ENDPROPERTIES
        
        METHODS
          SOURCE #pageActivated
            #public void pageActivated()
            #{
            #    dimensionDefaultingController.pageActivated();
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageDimensionTab
          Width               #Column width
          ElementPosition     #2113929214
          HierarchyParent     #Tab
          Caption             #@SYS53630
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageFilter
          Width               #Column width
          ElementPosition     #2130706430
          HierarchyParent     #Tab
          Caption             #@SYS2163
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageGeneral
          ElementPosition     #1610612734
          HierarchyParent     #Tab
          Caption             #@SYS2952
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageItemSpecification
          Width               #Column width
          ElementPosition     #1879048190
          HierarchyParent     #Tab
          Caption             #@SYS7407
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageOverview
          Width               #Column width
          ElementPosition     #1073741823
          HierarchyParent     #Tab
          Caption             #@SYS9039
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #Group_Active
          ElementPosition     #1073741822
          HierarchyParent     #ProjectAdministration
          DataSource          #ForecastSales
          DataField           #Active
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #LockCustAccountId
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #Column21
          Label               #@SYS24704
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    forecastSales_ds.executeQuery();
            #    element.updateFields();
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #LockCustGroupId
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #Column21
          Label               #@SYS11904
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    forecastSales_ds.executeQuery();
            #    element.updateFields();
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #LockItemGroupId
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #Column31
          Label               #@SYS4922
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    forecastSales_ds.executeQuery();
            #    element.updateFields();
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #LockItemId
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #Column31
          Label               #@SYS7407
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    forecastSales_ds.executeQuery();
            #    element.updateFields();
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #LockModelId
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #Column11
          Label               #@SYS9923
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    forecastSales_ds.executeQuery();
            #    element.updateFields();
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #Allocation_AllocateMethod
          ElementPosition     #613566756
          HierarchyParent     #Overview_GroupAllocation
          DataSource          #ForecastSales
          DataField           #AllocateMethod
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #Allocation_FreqCode
          AutoDeclaration     #Yes
          ElementPosition     #1227133512
          HierarchyParent     #Overview_GroupAllocation
          Selection           #255
          DataSource          #ForecastSales
          DataField           #FreqCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #ForecastSales_ProjForecastBudgetType
          AutoDeclaration     #Yes
          ElementPosition     #2021161072
          HierarchyParent     #Overview_GridForecastSales
          DataSource          #ForecastSales
          DataField           #ProjForecastBudgetType
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #CreateLines
          ElementPosition     #1994091957
          HierarchyParent     #Overview_GroupAllocation
          Text                #@SYS26120
          Command             #272
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #DeleteButton
          ElementPosition     #1073741822
          HierarchyParent     #NewDeleteGroup
          Text                #@sys14425
          ButtonDisplay       #Text & Image left
          NormalImage         #10121
          ImageLocation       #EmbeddedResource
          SaveRecord          #No
          Primary             #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #NewButton
          ElementPosition     #536870911
          HierarchyParent     #NewDeleteGroup
          ButtonDisplay       #Text & Image left
          NormalImage         #11045
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          Command             #260
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Allocation_EndDate
          AutoDeclaration     #Yes
          ElementPosition     #1840700268
          HierarchyParent     #Overview_GroupAllocation
          DataSource          #ForecastSales
          DataField           #EndDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Dates_ProjForecastCostPaymDate
          ConfigurationKey    #ProjAdvCashFlow
          ElementPosition     #1533916890
          HierarchyParent     #Dates
          DataSource          #ForecastSales
          DataField           #ProjForecastCostPaymDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Dates_ProjForecastSalesPaymDate
          ConfigurationKey    #ProjAdvCashFlow
          ElementPosition     #1840700268
          HierarchyParent     #Dates
          DataSource          #ForecastSales
          DataField           #ProjForecastSalesPaymDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Dates_StartDate
          ElementPosition     #613566756
          HierarchyParent     #Dates
          Label               #@SYS54242
          DataSource          #ForecastSales
          DataField           #StartDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #ForecastSalesExpand_StartDate
          ElementPosition     #613566756
          HierarchyParent     #Overview_GridForecastSalesExploded
          DataSource          #ForecastSalesExpand
          DataField           #StartDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Group_StartDate
          ElementPosition     #477218588
          HierarchyParent     #ProjectIdentification
          Label               #@SYS54242
          DataSource          #ForecastSales
          DataField           #StartDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Overview_StartDate
          ElementPosition     #378967701
          HierarchyParent     #Overview_GridForecastSales
          DataSource          #ForecastSales
          DataField           #StartDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL INTEDIT
        PROPERTIES
          Name                #Allocation_CtrlFreq
          AutoDeclaration     #Yes
          ElementPosition     #920350134
          HierarchyParent     #Overview_GroupAllocation
          DataSource          #ForecastSales
          DataField           #Freq
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CtrlInvent
          AutoDeclaration     #Yes
          ElementPosition     #858993456
          HierarchyParent     #ButtonGroup
          MenuItemName        #ForecastInvent
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ctrlLedgerCoverage
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #ButtonGroup
          MenuItemName        #LedgerCoverage
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #public void clicked()
            #{
            #    if (forecastSales.AllocateMethod != BudgetAllocateMethod::None)
            #    {
            #        overview_GridForecastSalesExploded.setFocus();
            #        ctrlLedgerCoverage.dataSource(forecastSalesExpand.dataSource().name());
            #    }
            #    else
            #    {
            #        ctrlLedgerCoverage.dataSource(forecastSales.dataSource().name());
            #    }
            #
            #    super();
            #
            #
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventDimParmFixed
          ElementPosition     #1431655764
          HierarchyParent     #InventButton
          MenuItemName        #InventDimParmFixed
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #Manipulation
          ElementPosition     #429496728
          HierarchyParent     #ButtonGroup
          ButtonDisplay       #Text & Image left
          NormalImage         #10040
          ImageLocation       #EmbeddedResource
          DataSource          #ForecastSales
          MenuItemType        #Action
          MenuItemName        #ForecastManipulation
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #public void clicked()
            #{
            #    super();
            #
            #    forecastSales_ds.research();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ProjForecastItemCopy
          ElementPosition     #1717986912
          HierarchyParent     #ButtonGroup
          MultiSelect         #Yes
          DataSource          #ForecastSales
          MenuItemName        #ProjForecastItemCopy
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ProjForecastTransferFromQuotationItem
          ElementPosition     #1932735276
          HierarchyParent     #ButtonGroup
          MenuItemName        #ProjForecastTransferFromQuotationItem
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ProjTransBudget
          ElementPosition     #1431655764
          HierarchyParent     #ProjectButton
          ButtonDisplay       #Text & Image left
          NormalImage         #10627
          ImageLocation       #EmbeddedResource
          MenuItemName        #ProjTransBudget
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesBalances
          ElementPosition     #644245092
          HierarchyParent     #ButtonGroup
          MenuItemName        #ForecastSalesBalance
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #CostAmount
          ElementPosition     #1717986916
          HierarchyParent     #ProjectCostPrice
          DataSource          #ForecastSales
          DataMethod          #costAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ctrlGrossAmount
          AutoDeclaration     #Yes
          HelpText            #@SYS26695
          ElementPosition     #1717986916
          HierarchyParent     #Price_Discount
          DisplaceNegative    #0
          DataSource          #ForecastSales
          DataMethod          #GrossAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ForecastSales_CostPrice
          ElementPosition     #1717986916
          HierarchyParent     #Prices
          DataSource          #ForecastSales
          DataField           #CostPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ForecastSales_DiscAmount
          ElementPosition     #1288490187
          HierarchyParent     #Price_Discount
          DataSource          #ForecastSales
          DataField           #DiscAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ForecastSales_DiscPercent
          ElementPosition     #858993458
          HierarchyParent     #Price_Discount
          DataSource          #ForecastSales
          DataField           #DiscPercent
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ForecastSales_InventQty
          ElementPosition     #858993458
          HierarchyParent     #Inventory
          DataSource          #ForecastSales
          DataField           #InventQty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ForecastSales_PriceUnit
          ElementPosition     #858993458
          HierarchyParent     #Prices
          DataSource          #ForecastSales
          DataField           #PriceUnit
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ForecastSales_SalesMarkup
          ElementPosition     #1288490187
          HierarchyParent     #Prices
          DataSource          #ForecastSales
          DataField           #SalesMarkup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ForecastSalesExpand_Amount
          ElementPosition     #1533916890
          HierarchyParent     #Overview_GridForecastSalesExploded
          DataSource          #ForecastSalesExpand
          DataField           #Amount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ForecastSalesExpand_SalesQty
          ElementPosition     #920350134
          HierarchyParent     #Overview_GridForecastSalesExploded
          DataSource          #ForecastSalesExpand
          DataField           #SalesQty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ForecastSalesItem_Amount
          ElementPosition     #1670265058
          HierarchyParent     #ItemSpecification_gridForecastItem
          DataSource          #ForecastSales
          DataField           #Amount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ForecastSalesItem_SalesPrice
          ElementPosition     #1431655764
          HierarchyParent     #ItemSpecification_gridForecastItem
          DataSource          #ForecastSales
          DataField           #SalesPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ForecastSalesItem_SalesQty
          ElementPosition     #954437176
          HierarchyParent     #ItemSpecification_gridForecastItem
          DataSource          #ForecastSales
          DataField           #SalesQty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Group1_CostPrice
          ElementPosition     #1288490187
          HierarchyParent     #ProjectCostPrice
          DataSource          #ForecastSales
          DataField           #CostPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Group1_SalesQty
          ElementPosition     #858993458
          HierarchyParent     #ProjectCostPrice
          DataSource          #ForecastSales
          DataField           #SalesQty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Overview_Amount
          AutoDeclaration     #Yes
          ElementPosition     #1642193371
          HierarchyParent     #Overview_GridForecastSales
          DataSource          #ForecastSales
          DataField           #Amount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Overview_CostPrice
          AutoDeclaration     #Yes
          ElementPosition     #1768515938
          HierarchyParent     #Overview_GridForecastSales
          DataSource          #ForecastSales
          DataField           #CostPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Overview_SalesPrice
          AutoDeclaration     #Yes
          ElementPosition     #1831677221
          HierarchyParent     #Overview_GridForecastSales
          Label               #@SYS5755
          DataSource          #ForecastSales
          DataField           #SalesPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Overview_SalesQty
          ElementPosition     #1389548237
          HierarchyParent     #Overview_GridForecastSales
          DisplaceNegative    #0
          DataSource          #ForecastSales
          DataField           #SalesQty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Allocation_KeyId
          AutoDeclaration     #Yes
          ElementPosition     #1533916890
          HierarchyParent     #Overview_GroupAllocation
          DataSource          #ForecastSales
          DataField           #KeyId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CritCustAccountId
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #Column22
          ShowLabel           #No
          ExtendedDataType    
            ARRAY 
              #CustAccount
              #
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    if (lockCustAccountId.value())
            #    {
            #        forecastSales_ds.executeQuery();
            #        element.updateFields();
            #    }
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CritCustGroupId
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #Column22
          ShowLabel           #No
          ExtendedDataType    
            ARRAY 
              #CustGroupId
              #
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    if (lockCustGroupId.value())
            #    {
            #        forecastSales_ds.executeQuery();
            #        element.updateFields();
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CritItemGroupId
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #Column32
          ShowLabel           #No
          ExtendedDataType    
            ARRAY 
              #ItemGroupId
              #
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    if (lockItemGroupId.value())
            #    {
            #        forecastSales_ds.executeQuery();
            #        element.updateFields();
            #    }
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CritItemId
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #Column32
          ShowLabel           #No
          ExtendedDataType    
            ARRAY 
              #ItemId
              #
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    if (lockItemId.value())
            #    {
            #        forecastSales_ds.executeQuery();
            #        element.updateFields();
            #    }
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #critModelId
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #Column12
          ShowLabel           #No
          ExtendedDataType    
            ARRAY 
              #ForecastModelHeadId
              #
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    if (lockModelId.value())
            #    {
            #        forecastSales_ds.executeQuery();
            #        element.updateFields();
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForecastSales_Currency
          ElementPosition     #1894838505
          HierarchyParent     #Overview_GridForecastSales
          Label               #@SYS56480
          DataSource          #ForecastSales
          DataField           #Currency
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForecastSales_ItemBOMId
          ElementPosition     #1288490187
          HierarchyParent     #Inventory
          DataSource          #ForecastSales
          DataField           #ItemBOMId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForecastSales_ItemRouteId
          ElementPosition     #1717986916
          HierarchyParent     #Inventory
          DataSource          #ForecastSales
          DataField           #ItemRouteId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForecastSalesExpand_Currency
          ElementPosition     #1840700268
          HierarchyParent     #Overview_GridForecastSalesExploded
          DataSource          #ForecastSalesExpand
          DataField           #Currency
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForecastSalesExpand_SalesUnitId
          ElementPosition     #1227133512
          HierarchyParent     #Overview_GridForecastSalesExploded
          DataSource          #ForecastSalesExpand
          DataField           #SalesUnitId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForecastSalesItem_ItemId
          ElementPosition     #477218588
          HierarchyParent     #ItemSpecification_gridForecastItem
          DataSource          #ForecastSales
          DataField           #ItemId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForecastSalesItem_ItemName
          AllowEdit           #No
          ElementPosition     #1908874352
          HierarchyParent     #ItemSpecification_gridForecastItem
          DataSource          #ForecastSales
          DataMethod          #itemName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForecastSalesItem_SalesUnitId
          ElementPosition     #1193046470
          HierarchyParent     #ItemSpecification_gridForecastItem
          DataSource          #ForecastSales
          DataField           #SalesUnitId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Group_ActivityNumber
          AutoDeclaration     #Yes
          ElementPosition     #1193046470
          HierarchyParent     #ProjectIdentification
          DataSource          #ForecastSales
          DataField           #ActivityNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Group_ItemId
          ElementPosition     #1670265058
          HierarchyParent     #ProjectIdentification
          DataSource          #ForecastSales
          DataField           #ItemId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Group_modifiedBy
          ElementPosition     #1610612733
          HierarchyParent     #ProjectAdministration
          DataSource          #ForecastSales
          DataField           #modifiedBy
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Group_ProjCategoryId
          ElementPosition     #1431655764
          HierarchyParent     #ProjectIdentification
          DataSource          #ForecastSales
          DataField           #ProjCategoryId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Group_ProjId
          ElementPosition     #715827882
          HierarchyParent     #ProjectIdentification
          DataSource          #ForecastSales
          DataField           #ProjId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Group_ProjLinePropertyId
          ElementPosition     #1908874352
          HierarchyParent     #ProjectIdentification
          DataSource          #ForecastSales
          DataField           #ProjLinePropertyId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Overview_CustAccountId
          AutoDeclaration     #Yes
          ElementPosition     #631612835
          HierarchyParent     #Overview_GridForecastSales
          DataSource          #ForecastSales
          DataField           #CustAccountId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Overview_CustGroupId
          AutoDeclaration     #Yes
          ElementPosition     #757935402
          HierarchyParent     #Overview_GridForecastSales
          DataSource          #ForecastSales
          DataField           #CustGroupId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Overview_ItemAllocateId
          ElementPosition     #1263225670
          HierarchyParent     #Overview_GridForecastSales
          DataSource          #ForecastSales
          DataField           #ItemAllocateId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Overview_ItemGroupId
          AutoDeclaration     #Yes
          ElementPosition     #1010580536
          HierarchyParent     #Overview_GridForecastSales
          DataSource          #ForecastSales
          DataField           #ItemGroupId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Overview_ItemId
          AutoDeclaration     #Yes
          ElementPosition     #884257969
          HierarchyParent     #Overview_GridForecastSales
          DataSource          #ForecastSales
          DataField           #ItemId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Overview_ModelId
          AutoDeclaration     #Yes
          ElementPosition     #252645134
          HierarchyParent     #Overview_GridForecastSales
          DataSource          #ForecastSales
          DataField           #ModelId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Overview_ProjId
          AutoDeclaration     #Yes
          ElementPosition     #505290268
          HierarchyParent     #Overview_GridForecastSales
          DataSource          #ForecastSales
          DataField           #ProjId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Overview_SalesUnitId
          ElementPosition     #1515870804
          HierarchyParent     #Overview_GridForecastSales
          DataSource          #ForecastSales
          DataField           #SalesUnitId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
    ENDCONTAINER
    
  ENDDESIGN
  
  PERMISSIONS #Permissions
    PROPERTIES
    ENDPROPERTIES
    
    PERMISSIONSET #Read
      PROPERTIES
      ENDPROPERTIES
      
      FORM #Controls
        CONTROL #TabFinancialDimensions
          PROPERTIES
            Control             #TabFinancialDimensions
            EffectiveAccess     #Update
          ENDPROPERTIES
          
        ENDCONTROL
        
    ENDFORM
    
  TABLES #Tables
  ENDTABLES
  
SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #ForecastManiSales
    PROPERTIES
      Form                #ForecastManiSales
      AccessLevel         #Read
      SystemManaged       #No
      ManagedBy           #Manual
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Update
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
    CONTROL #TabFinancialDimensions
      PROPERTIES
        Control             #TabFinancialDimensions
        EffectiveAccess     #Update
      ENDPROPERTIES
      
    ENDCONTROL
    
ENDFORM

TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #ForecastManiSales
    PROPERTIES
      Form                #ForecastManiSales
      AccessLevel         #Update
      SystemManaged       #No
      ManagedBy           #Manual
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Create
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
    CONTROL #TabFinancialDimensions
      PROPERTIES
        Control             #TabFinancialDimensions
        EffectiveAccess     #Update
      ENDPROPERTIES
      
    ENDCONTROL
    
ENDFORM

TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #ForecastManiSales
    PROPERTIES
      Form                #ForecastManiSales
      AccessLevel         #Create
      SystemManaged       #No
      ManagedBy           #Manual
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Delete
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
    CONTROL #TabFinancialDimensions
      PROPERTIES
        Control             #TabFinancialDimensions
        EffectiveAccess     #Update
      ENDPROPERTIES
      
    ENDCONTROL
    
ENDFORM

TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #ForecastManiSales
    PROPERTIES
      Form                #ForecastManiSales
      AccessLevel         #Delete
      SystemManaged       #No
      ManagedBy           #Manual
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

ENDPERMISSIONS

ENDFORM


***Element: END
